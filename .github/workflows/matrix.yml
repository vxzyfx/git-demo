name: CI

on:
  push:
    branches:
      - "dev"

jobs:
  linux:
    strategy:
      matrix:
        container:
        - 'debian:7'
        - 'debian:testing'
        - 'ubuntu:14.04'
        - 'ubuntu:devel'
        - 'centos:6'
        - 'centos:latest'
    runs-on: ubuntu-latest
    container: ${{ matrix.container }}
    steps:
      - run: cat /etc/*release
      - name: Inspect contexts
        run: |
          echo "The secrets context is:"
          echo "${{ toJson(secrets) }}"
          echo ""
          echo "The github context is:"
          echo "${{ toJson(github) }}"
          echo ""
          echo "The job context is:"
          echo "${{ toJson(job) }}"
          echo ""
          echo "The steps context is:"
          echo "${{ toJson(steps) }}"
          echo ""
          echo "The runner context is:"
          echo "${{ toJson(runner) }}"
          echo ""
          echo "The strategy context is:"
          echo "${{ toJson(strategy) }}"
          echo ""
          echo "The matrix context is:"
          echo "${{ toJson(matrix) }}"
      - run: |
          export FOO=bar
          echo "FOO=$FOO" >> "$GITHUB_ENV"
      - run: echo $FOO
